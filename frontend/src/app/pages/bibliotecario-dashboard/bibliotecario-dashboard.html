<!-- src/app/pages/bibliotecario-dashboard/bibliotecario-dashboard.html -->
<div class="dashboard-container">
  <h1 class="titulo">
    游늵 Panel del Bibliotecario
  </h1>

  <!-- M칄TRICAS -->
  <div class="kpi-grid">
    <div class="kpi-box pendiente">
      <h3>Pendientes</h3>
      <p>{{ pendientes }}</p>
    </div>

    <div class="kpi-box listo">
      <h3>Listos para Retiro</h3>
      <p>{{ listosRetiro }}</p>
    </div>

    <div class="kpi-box rechazado">
      <h3>Rechazados</h3>
      <p>{{ rechazados }}</p>
    </div>

    <div class="kpi-box prestado">
      <h3>Prestados</h3>
      <p>{{ prestados }}</p>
    </div>

    <div class="kpi-box devuelto">
      <h3>Devueltos</h3>
      <p>{{ devueltos }}</p>
    </div>

    <div class="kpi-box total">
      <h3>Total Solicitudes</h3>
      <p>{{ totalSolicitudes }}</p>
    </div>

    <div class="kpi-box tasa">
      <h3>Aprobaci칩n</h3>
      <p>{{ tasaAprobacion }}%</p>
    </div>

    <div class="kpi-box tasa-rechazo">
      <h3>Rechazo</h3>
      <p>{{ tasaRechazo }}%</p>
    </div>
  </div>

  <!-- FILA: GR츼FICO + RANKING -->
  <div class="cards-row">
    <!-- Gr치fico -->
    <div class="card card-chart">
      <div class="card-header">游늳 Estado de Solicitudes</div>
      <div class="card-body chart-body">
        <canvas id="chartEstados"></canvas>
      </div>
    </div>

    <!-- Ranking libros -->
    <div class="card card-ranking">
      <div class="card-header">游닄 Libros m치s solicitados</div>
      <div class="card-body ranking-body">
        <ul *ngIf="rankingLibros.length > 0; else noRanking">
          <li *ngFor="let item of rankingLibros">
            <span class="ranking-titulo">
              <strong>{{ item.titulo }}</strong>
            </span>
            <span class="ranking-count">
              {{ item.cantidad }} solicitudes
            </span>
          </li>
        </ul>

        <ng-template #noRanking>
          <p class="empty-text">
            A칰n no hay suficientes datos para mostrar el ranking.
          </p>
        </ng-template>
      </div>
    </div>
  </div>

  <!-- SOLICITUDES -->
  <div class="card card-solicitudes">
    <div class="card-header">游 Solicitudes</div>
    <div class="card-body">
      <p *ngIf="solicitudes.length === 0" class="empty-text">
        No hay solicitudes registradas.
      </p>

      <ul *ngIf="solicitudes.length > 0" class="solicitudes-list">
        <li *ngFor="let s of solicitudes" class="solicitud-item">
          <div class="solicitud-texto">
            <strong>{{ s.lector_nombre }}</strong>
            pidi칩 <span class="libro">{{ s.libro_titulo }}</span>
          </div>

          <div class="solicitud-meta">
            <span class="badge-estado" [ngClass]="s.estado">
              {{ s.estado }}
            </span>

            <button
              class="btn aceptar"
              *ngIf="s.estado === 'pendiente'"
              (click)="aceptarSolicitud(s.id)"
            >
              Aceptar
            </button>

            <button
              class="btn rechazar"
              *ngIf="s.estado === 'pendiente'"
              (click)="rechazarSolicitud(s.id)"
            >
              Rechazar
            </button>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>




