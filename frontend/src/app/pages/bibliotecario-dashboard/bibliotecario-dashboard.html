<div class="dashboard-container">

  <h1 class="titulo">Panel del Bibliotecario ðŸ“˜</h1>

  <!-- KPI CARDS -->
  <div class="kpi-grid">
    <div class="kpi-card kpi-pendientes">
      <h2>{{ pendientes }}</h2>
      <p>Solicitudes Pendientes</p>
    </div>

    <div class="kpi-card kpi-aceptadas">
      <h2>{{ aceptadas }}</h2>
      <p>Listas para Retiro</p>
    </div>

    <div class="kpi-card kpi-rechazadas">
      <h2>{{ rechazadas }}</h2>
      <p>Rechazadas</p>
    </div>

    <div class="kpi-card kpi-total">
      <h2>{{ pendientes + aceptadas + rechazadas }}</h2>
      <p>Total Procesadas</p>
    </div>
  </div>

  <!-- TABLA -->
  <div class="tabla-container">

    <h2>Solicitudes de PrÃ©stamo</h2>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Libro</th>
          <th>Usuario</th>
          <th>Fecha</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let s of solicitudes">
          <td>{{ s.id }}</td>
          <td>{{ s.tituloLibro }}</td>
          <td>{{ s.usuarioId }}</td>
          <td>{{ s.fechaSolicitud | date:'yyyy-MM-dd' }}</td>

          <td>
            <span class="tag" [ngClass]="s.estado.toLowerCase()">
              {{ s.estado }}
            </span>
          </td>

          <td>
            <button class="btn-aceptar" 
                    (click)="aceptarSolicitud(s.id)"
                    *ngIf="s.estado === 'Pendiente'">
              âœ” Aceptar
            </button>

            <button class="btn-rechazar" 
                    (click)="rechazarSolicitud(s.id)"
                    *ngIf="s.estado === 'Pendiente'">
              âœ– Rechazar
            </button>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

</div>
